{"ast":null,"code":"/**\n * Technical Indicators Calculator\n * \n * SIMPLIFIED VERSION - No \"indicator soup\"\n * Focus on: Trend Structure, Moving Averages, Volume\n * \n * Removed: RSI scoring, MACD scoring, Bollinger scoring, ADX scoring\n * (These are kept for reference but NOT used in scoring)\n */\n\n/**\n * Calculate Simple Moving Average (SMA)\n * @param {number[]} prices - Array of closing prices\n * @param {number} period - SMA period\n * @returns {number|null} SMA value\n */\nexport function calculateSMA(prices, period) {\n  if (!prices || prices.length < period) return null;\n  const slice = prices.slice(-period);\n  return slice.reduce((sum, price) => sum + price, 0) / period;\n}\n\n/**\n * Calculate Exponential Moving Average (EMA)\n * @param {number[]} prices - Array of closing prices\n * @param {number} period - EMA period\n * @returns {number|null} EMA value\n */\nexport function calculateEMA(prices, period) {\n  if (!prices || prices.length < period) return null;\n  const k = 2 / (period + 1);\n  let ema = prices[0];\n  for (let i = 1; i < prices.length; i++) {\n    ema = prices[i] * k + ema * (1 - k);\n  }\n  return ema;\n}\n\n/**\n * Calculate Average True Range (ATR) - Used for stop loss calculation\n * @param {number[]} highs - Array of high prices\n * @param {number[]} lows - Array of low prices\n * @param {number[]} closes - Array of closing prices\n * @param {number} period - ATR period (default 14)\n * @returns {number|null} ATR value\n */\nexport function calculateATR(highs, lows, closes, period = 14) {\n  if (!highs || !lows || !closes || closes.length < period + 1) return null;\n  const trueRanges = [];\n  for (let i = 1; i < closes.length; i++) {\n    const tr = Math.max(highs[i] - lows[i], Math.abs(highs[i] - closes[i - 1]), Math.abs(lows[i] - closes[i - 1]));\n    trueRanges.push(tr);\n  }\n\n  // Calculate ATR as SMA of true ranges\n  const recentTR = trueRanges.slice(-period);\n  return recentTR.reduce((sum, tr) => sum + tr, 0) / period;\n}\n\n/**\n * Analyze Trend Structure (40 points max)\n * This is THE core technical analysis\n * \n * @param {Object} priceData - Price data from backend\n * @returns {Object} Trend analysis with scores\n */\nexport function analyzeTrendStructure(priceData) {\n  const {\n    closes,\n    highs,\n    lows,\n    volumes\n  } = priceData;\n  if (!closes || closes.length < 200) {\n    return {\n      error: 'Insufficient price history for trend analysis',\n      totalScore: 0\n    };\n  }\n  const currentPrice = closes[closes.length - 1];\n\n  // Calculate moving averages\n  const sma50 = calculateSMA(closes, 50);\n  const sma200 = calculateSMA(closes, 200);\n  const ema8 = calculateEMA(closes, 8);\n  const ema21 = calculateEMA(closes, 21);\n\n  // Calculate average volume\n  const avgVolume50 = calculateSMA(volumes, 50);\n  const currentVolume = volumes[volumes.length - 1];\n\n  // Calculate ATR for trade setup\n  const atr = calculateATR(highs, lows, closes, 14);\n\n  // ========================================\n  // SCORING (40 points total for technical)\n  // ========================================\n\n  let trendStructureScore = 0; // Max 15 points\n  let shortTermTrendScore = 0; // Max 10 points\n  let volumeScore = 0; // Max 5 points\n  // Note: RS score (10 points) is calculated separately\n\n  const analysis = {\n    metrics: {},\n    scores: {},\n    flags: []\n  };\n\n  // -----------------------------------------\n  // 1. TREND STRUCTURE (15 points)\n  // Price > 50 SMA > 200 SMA = Stage 2 uptrend\n  // -----------------------------------------\n  const priceAbove50 = currentPrice > sma50;\n  const priceAbove200 = currentPrice > sma200;\n  const sma50Above200 = sma50 > sma200;\n  analysis.metrics.trendStructure = {\n    currentPrice,\n    sma50,\n    sma200,\n    priceAbove50,\n    priceAbove200,\n    sma50Above200,\n    isStage2: priceAbove50 && priceAbove200 && sma50Above200\n  };\n  if (priceAbove50 && priceAbove200 && sma50Above200) {\n    // Perfect Stage 2 uptrend\n    trendStructureScore = 15;\n    analysis.flags.push({\n      type: 'positive',\n      message: 'Stage 2 uptrend confirmed'\n    });\n  } else if (priceAbove50 && priceAbove200) {\n    // Price above both MAs but not perfectly stacked\n    trendStructureScore = 10;\n    analysis.flags.push({\n      type: 'positive',\n      message: 'Price above major moving averages'\n    });\n  } else if (priceAbove200) {\n    // Only above 200 SMA\n    trendStructureScore = 5;\n    analysis.flags.push({\n      type: 'warning',\n      message: 'Above 200 SMA but below 50 SMA'\n    });\n  } else {\n    // Below 200 SMA - CRITICAL FAIL\n    trendStructureScore = 0;\n    analysis.flags.push({\n      type: 'critical',\n      message: 'Below 200 SMA - Not in uptrend'\n    });\n  }\n  analysis.scores.trendStructure = trendStructureScore;\n\n  // -----------------------------------------\n  // 2. SHORT-TERM TREND (10 points)\n  // Price > 8 EMA > 21 EMA\n  // -----------------------------------------\n  const priceAboveEma8 = currentPrice > ema8;\n  const priceAboveEma21 = currentPrice > ema21;\n  const ema8AboveEma21 = ema8 > ema21;\n  analysis.metrics.shortTermTrend = {\n    ema8,\n    ema21,\n    priceAboveEma8,\n    priceAboveEma21,\n    ema8AboveEma21,\n    isShortTermBullish: priceAboveEma8 && ema8AboveEma21\n  };\n  if (priceAboveEma8 && ema8AboveEma21) {\n    shortTermTrendScore = 10;\n    analysis.flags.push({\n      type: 'positive',\n      message: 'Short-term momentum bullish'\n    });\n  } else if (priceAboveEma21) {\n    shortTermTrendScore = 5;\n    analysis.flags.push({\n      type: 'neutral',\n      message: 'Short-term momentum mixed'\n    });\n  } else {\n    shortTermTrendScore = 0;\n    analysis.flags.push({\n      type: 'warning',\n      message: 'Short-term momentum bearish'\n    });\n  }\n  analysis.scores.shortTermTrend = shortTermTrendScore;\n\n  // -----------------------------------------\n  // 3. VOLUME (5 points)\n  // Current volume > 1.5x 50-day average = accumulation\n  // -----------------------------------------\n  const volumeRatio = currentVolume / avgVolume50;\n  analysis.metrics.volume = {\n    currentVolume,\n    avgVolume50,\n    volumeRatio,\n    isHighVolume: volumeRatio > 1.5\n  };\n  if (volumeRatio > 2.0) {\n    volumeScore = 5;\n    analysis.flags.push({\n      type: 'positive',\n      message: 'Very high volume - strong interest'\n    });\n  } else if (volumeRatio > 1.5) {\n    volumeScore = 4;\n    analysis.flags.push({\n      type: 'positive',\n      message: 'Above average volume'\n    });\n  } else if (volumeRatio > 1.0) {\n    volumeScore = 2;\n  } else {\n    volumeScore = 0;\n    analysis.flags.push({\n      type: 'neutral',\n      message: 'Below average volume'\n    });\n  }\n  analysis.scores.volume = volumeScore;\n\n  // -----------------------------------------\n  // TOTAL TECHNICAL SCORE (without RS)\n  // -----------------------------------------\n  const technicalScoreWithoutRS = trendStructureScore + shortTermTrendScore + volumeScore;\n  analysis.scores.technicalTotal = technicalScoreWithoutRS;\n  analysis.scores.maxPossible = 30; // 40 total - 10 for RS which is separate\n\n  // -----------------------------------------\n  // ATR for trade setup (not scored)\n  // -----------------------------------------\n  analysis.metrics.atr = {\n    value: atr,\n    atrPercent: atr ? atr / currentPrice * 100 : null\n  };\n\n  // -----------------------------------------\n  // Quality Gate: Below 200 SMA\n  // -----------------------------------------\n  analysis.qualityGate = {\n    passes: priceAbove200,\n    reason: priceAbove200 ? 'Stock is in uptrend (above 200 SMA)' : 'CRITICAL: Stock below 200 SMA - automatic AVOID'\n  };\n  return analysis;\n}\n\n/**\n * Calculate trade setup (entry, stop, target)\n * \n * @param {number} currentPrice - Current stock price\n * @param {number} atr - Average True Range\n * @param {number} accountSize - Trading account size (default $10,000)\n * @returns {Object} Trade setup details\n */\nexport function calculateTradeSetup(currentPrice, atr, accountSize = 10000) {\n  if (!currentPrice || !atr) {\n    return {\n      error: 'Insufficient data for trade setup'\n    };\n  }\n\n  // Stop loss = 1.2x ATR below entry\n  const stopLoss = currentPrice - 1.2 * atr;\n  const riskPerShare = currentPrice - stopLoss;\n\n  // Target = 2:1 reward-to-risk minimum\n  const target = currentPrice + 2 * riskPerShare;\n\n  // Position sizing (1% account risk)\n  const riskAmount = accountSize * 0.01;\n  const shares = Math.floor(riskAmount / riskPerShare);\n  const positionValue = shares * currentPrice;\n  return {\n    entry: parseFloat(currentPrice.toFixed(2)),\n    stopLoss: parseFloat(stopLoss.toFixed(2)),\n    target: parseFloat(target.toFixed(2)),\n    riskPerShare: parseFloat(riskPerShare.toFixed(2)),\n    rewardRisk: 2.0,\n    shares,\n    positionValue: parseFloat(positionValue.toFixed(2)),\n    riskAmount: parseFloat(riskAmount.toFixed(2)),\n    atr: parseFloat(atr.toFixed(2)),\n    atrMultiplier: 1.2\n  };\n}\n\n/**\n * Calculate 52-week high proximity\n * Stocks near 52-week high often continue higher\n * \n * @param {number} currentPrice - Current price\n * @param {number} high52Week - 52-week high price\n * @returns {Object} High proximity analysis\n */\nexport function calculate52WeekHighProximity(currentPrice, high52Week) {\n  if (!currentPrice || !high52Week) return null;\n  const percentFromHigh = (currentPrice / high52Week - 1) * 100;\n  const isNearHigh = percentFromHigh > -10; // Within 10% of high\n\n  return {\n    high52Week,\n    percentFromHigh: parseFloat(percentFromHigh.toFixed(2)),\n    isNearHigh,\n    interpretation: isNearHigh ? 'Near 52-week high - showing strength' : 'More than 10% from high'\n  };\n}","map":{"version":3,"names":["calculateSMA","prices","period","length","slice","reduce","sum","price","calculateEMA","k","ema","i","calculateATR","highs","lows","closes","trueRanges","tr","Math","max","abs","push","recentTR","analyzeTrendStructure","priceData","volumes","error","totalScore","currentPrice","sma50","sma200","ema8","ema21","avgVolume50","currentVolume","atr","trendStructureScore","shortTermTrendScore","volumeScore","analysis","metrics","scores","flags","priceAbove50","priceAbove200","sma50Above200","trendStructure","isStage2","type","message","priceAboveEma8","priceAboveEma21","ema8AboveEma21","shortTermTrend","isShortTermBullish","volumeRatio","volume","isHighVolume","technicalScoreWithoutRS","technicalTotal","maxPossible","value","atrPercent","qualityGate","passes","reason","calculateTradeSetup","accountSize","stopLoss","riskPerShare","target","riskAmount","shares","floor","positionValue","entry","parseFloat","toFixed","rewardRisk","atrMultiplier","calculate52WeekHighProximity","high52Week","percentFromHigh","isNearHigh","interpretation"],"sources":["/Users/balajik/projects/swing-trade-analyzer/frontend/src/utils/technicalIndicators.js"],"sourcesContent":["/**\n * Technical Indicators Calculator\n * \n * SIMPLIFIED VERSION - No \"indicator soup\"\n * Focus on: Trend Structure, Moving Averages, Volume\n * \n * Removed: RSI scoring, MACD scoring, Bollinger scoring, ADX scoring\n * (These are kept for reference but NOT used in scoring)\n */\n\n/**\n * Calculate Simple Moving Average (SMA)\n * @param {number[]} prices - Array of closing prices\n * @param {number} period - SMA period\n * @returns {number|null} SMA value\n */\nexport function calculateSMA(prices, period) {\n  if (!prices || prices.length < period) return null;\n  const slice = prices.slice(-period);\n  return slice.reduce((sum, price) => sum + price, 0) / period;\n}\n\n/**\n * Calculate Exponential Moving Average (EMA)\n * @param {number[]} prices - Array of closing prices\n * @param {number} period - EMA period\n * @returns {number|null} EMA value\n */\nexport function calculateEMA(prices, period) {\n  if (!prices || prices.length < period) return null;\n  \n  const k = 2 / (period + 1);\n  let ema = prices[0];\n  \n  for (let i = 1; i < prices.length; i++) {\n    ema = prices[i] * k + ema * (1 - k);\n  }\n  \n  return ema;\n}\n\n/**\n * Calculate Average True Range (ATR) - Used for stop loss calculation\n * @param {number[]} highs - Array of high prices\n * @param {number[]} lows - Array of low prices\n * @param {number[]} closes - Array of closing prices\n * @param {number} period - ATR period (default 14)\n * @returns {number|null} ATR value\n */\nexport function calculateATR(highs, lows, closes, period = 14) {\n  if (!highs || !lows || !closes || closes.length < period + 1) return null;\n  \n  const trueRanges = [];\n  \n  for (let i = 1; i < closes.length; i++) {\n    const tr = Math.max(\n      highs[i] - lows[i],\n      Math.abs(highs[i] - closes[i - 1]),\n      Math.abs(lows[i] - closes[i - 1])\n    );\n    trueRanges.push(tr);\n  }\n  \n  // Calculate ATR as SMA of true ranges\n  const recentTR = trueRanges.slice(-period);\n  return recentTR.reduce((sum, tr) => sum + tr, 0) / period;\n}\n\n/**\n * Analyze Trend Structure (40 points max)\n * This is THE core technical analysis\n * \n * @param {Object} priceData - Price data from backend\n * @returns {Object} Trend analysis with scores\n */\nexport function analyzeTrendStructure(priceData) {\n  const { closes, highs, lows, volumes } = priceData;\n  \n  if (!closes || closes.length < 200) {\n    return {\n      error: 'Insufficient price history for trend analysis',\n      totalScore: 0\n    };\n  }\n  \n  const currentPrice = closes[closes.length - 1];\n  \n  // Calculate moving averages\n  const sma50 = calculateSMA(closes, 50);\n  const sma200 = calculateSMA(closes, 200);\n  const ema8 = calculateEMA(closes, 8);\n  const ema21 = calculateEMA(closes, 21);\n  \n  // Calculate average volume\n  const avgVolume50 = calculateSMA(volumes, 50);\n  const currentVolume = volumes[volumes.length - 1];\n  \n  // Calculate ATR for trade setup\n  const atr = calculateATR(highs, lows, closes, 14);\n  \n  // ========================================\n  // SCORING (40 points total for technical)\n  // ========================================\n  \n  let trendStructureScore = 0;    // Max 15 points\n  let shortTermTrendScore = 0;    // Max 10 points\n  let volumeScore = 0;            // Max 5 points\n  // Note: RS score (10 points) is calculated separately\n  \n  const analysis = {\n    metrics: {},\n    scores: {},\n    flags: []\n  };\n  \n  // -----------------------------------------\n  // 1. TREND STRUCTURE (15 points)\n  // Price > 50 SMA > 200 SMA = Stage 2 uptrend\n  // -----------------------------------------\n  const priceAbove50 = currentPrice > sma50;\n  const priceAbove200 = currentPrice > sma200;\n  const sma50Above200 = sma50 > sma200;\n  \n  analysis.metrics.trendStructure = {\n    currentPrice,\n    sma50,\n    sma200,\n    priceAbove50,\n    priceAbove200,\n    sma50Above200,\n    isStage2: priceAbove50 && priceAbove200 && sma50Above200\n  };\n  \n  if (priceAbove50 && priceAbove200 && sma50Above200) {\n    // Perfect Stage 2 uptrend\n    trendStructureScore = 15;\n    analysis.flags.push({ type: 'positive', message: 'Stage 2 uptrend confirmed' });\n  } else if (priceAbove50 && priceAbove200) {\n    // Price above both MAs but not perfectly stacked\n    trendStructureScore = 10;\n    analysis.flags.push({ type: 'positive', message: 'Price above major moving averages' });\n  } else if (priceAbove200) {\n    // Only above 200 SMA\n    trendStructureScore = 5;\n    analysis.flags.push({ type: 'warning', message: 'Above 200 SMA but below 50 SMA' });\n  } else {\n    // Below 200 SMA - CRITICAL FAIL\n    trendStructureScore = 0;\n    analysis.flags.push({ type: 'critical', message: 'Below 200 SMA - Not in uptrend' });\n  }\n  \n  analysis.scores.trendStructure = trendStructureScore;\n  \n  // -----------------------------------------\n  // 2. SHORT-TERM TREND (10 points)\n  // Price > 8 EMA > 21 EMA\n  // -----------------------------------------\n  const priceAboveEma8 = currentPrice > ema8;\n  const priceAboveEma21 = currentPrice > ema21;\n  const ema8AboveEma21 = ema8 > ema21;\n  \n  analysis.metrics.shortTermTrend = {\n    ema8,\n    ema21,\n    priceAboveEma8,\n    priceAboveEma21,\n    ema8AboveEma21,\n    isShortTermBullish: priceAboveEma8 && ema8AboveEma21\n  };\n  \n  if (priceAboveEma8 && ema8AboveEma21) {\n    shortTermTrendScore = 10;\n    analysis.flags.push({ type: 'positive', message: 'Short-term momentum bullish' });\n  } else if (priceAboveEma21) {\n    shortTermTrendScore = 5;\n    analysis.flags.push({ type: 'neutral', message: 'Short-term momentum mixed' });\n  } else {\n    shortTermTrendScore = 0;\n    analysis.flags.push({ type: 'warning', message: 'Short-term momentum bearish' });\n  }\n  \n  analysis.scores.shortTermTrend = shortTermTrendScore;\n  \n  // -----------------------------------------\n  // 3. VOLUME (5 points)\n  // Current volume > 1.5x 50-day average = accumulation\n  // -----------------------------------------\n  const volumeRatio = currentVolume / avgVolume50;\n  \n  analysis.metrics.volume = {\n    currentVolume,\n    avgVolume50,\n    volumeRatio,\n    isHighVolume: volumeRatio > 1.5\n  };\n  \n  if (volumeRatio > 2.0) {\n    volumeScore = 5;\n    analysis.flags.push({ type: 'positive', message: 'Very high volume - strong interest' });\n  } else if (volumeRatio > 1.5) {\n    volumeScore = 4;\n    analysis.flags.push({ type: 'positive', message: 'Above average volume' });\n  } else if (volumeRatio > 1.0) {\n    volumeScore = 2;\n  } else {\n    volumeScore = 0;\n    analysis.flags.push({ type: 'neutral', message: 'Below average volume' });\n  }\n  \n  analysis.scores.volume = volumeScore;\n  \n  // -----------------------------------------\n  // TOTAL TECHNICAL SCORE (without RS)\n  // -----------------------------------------\n  const technicalScoreWithoutRS = trendStructureScore + shortTermTrendScore + volumeScore;\n  \n  analysis.scores.technicalTotal = technicalScoreWithoutRS;\n  analysis.scores.maxPossible = 30; // 40 total - 10 for RS which is separate\n  \n  // -----------------------------------------\n  // ATR for trade setup (not scored)\n  // -----------------------------------------\n  analysis.metrics.atr = {\n    value: atr,\n    atrPercent: atr ? (atr / currentPrice * 100) : null\n  };\n  \n  // -----------------------------------------\n  // Quality Gate: Below 200 SMA\n  // -----------------------------------------\n  analysis.qualityGate = {\n    passes: priceAbove200,\n    reason: priceAbove200 \n      ? 'Stock is in uptrend (above 200 SMA)' \n      : 'CRITICAL: Stock below 200 SMA - automatic AVOID'\n  };\n  \n  return analysis;\n}\n\n/**\n * Calculate trade setup (entry, stop, target)\n * \n * @param {number} currentPrice - Current stock price\n * @param {number} atr - Average True Range\n * @param {number} accountSize - Trading account size (default $10,000)\n * @returns {Object} Trade setup details\n */\nexport function calculateTradeSetup(currentPrice, atr, accountSize = 10000) {\n  if (!currentPrice || !atr) {\n    return { error: 'Insufficient data for trade setup' };\n  }\n  \n  // Stop loss = 1.2x ATR below entry\n  const stopLoss = currentPrice - (1.2 * atr);\n  const riskPerShare = currentPrice - stopLoss;\n  \n  // Target = 2:1 reward-to-risk minimum\n  const target = currentPrice + (2 * riskPerShare);\n  \n  // Position sizing (1% account risk)\n  const riskAmount = accountSize * 0.01;\n  const shares = Math.floor(riskAmount / riskPerShare);\n  const positionValue = shares * currentPrice;\n  \n  return {\n    entry: parseFloat(currentPrice.toFixed(2)),\n    stopLoss: parseFloat(stopLoss.toFixed(2)),\n    target: parseFloat(target.toFixed(2)),\n    riskPerShare: parseFloat(riskPerShare.toFixed(2)),\n    rewardRisk: 2.0,\n    shares,\n    positionValue: parseFloat(positionValue.toFixed(2)),\n    riskAmount: parseFloat(riskAmount.toFixed(2)),\n    atr: parseFloat(atr.toFixed(2)),\n    atrMultiplier: 1.2\n  };\n}\n\n/**\n * Calculate 52-week high proximity\n * Stocks near 52-week high often continue higher\n * \n * @param {number} currentPrice - Current price\n * @param {number} high52Week - 52-week high price\n * @returns {Object} High proximity analysis\n */\nexport function calculate52WeekHighProximity(currentPrice, high52Week) {\n  if (!currentPrice || !high52Week) return null;\n  \n  const percentFromHigh = ((currentPrice / high52Week) - 1) * 100;\n  const isNearHigh = percentFromHigh > -10; // Within 10% of high\n  \n  return {\n    high52Week,\n    percentFromHigh: parseFloat(percentFromHigh.toFixed(2)),\n    isNearHigh,\n    interpretation: isNearHigh \n      ? 'Near 52-week high - showing strength' \n      : 'More than 10% from high'\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}