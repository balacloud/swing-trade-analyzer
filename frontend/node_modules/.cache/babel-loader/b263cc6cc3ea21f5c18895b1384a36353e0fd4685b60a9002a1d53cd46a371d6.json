{"ast":null,"code":"/**\n * Scoring Engine - 75 Point System\n * \n * Based on proven swing trading methodologies:\n * - Mark Minervini's SEPA\n * - William O'Neil's CAN SLIM\n * \n * Scoring Breakdown:\n * - Technical Analysis: 40 points (Trend 15 + Short-term 10 + RS 10 + Volume 5)\n * - Fundamental Analysis: 20 points\n * - Sentiment: 10 points (placeholder for v1.0)\n * - Risk/Macro: 5 points\n * \n * Verdict Logic:\n * - BUY: Score ≥60/75 + No critical fails + RS >1.0\n * - HOLD: Score 40-59 OR 1 critical fail\n * - AVOID: Score <40 OR 2+ critical fails OR RS <0.8\n */\n\nimport { calculateRelativeStrength, checkRSQualityGate } from './rsCalculator';\nimport { analyzeTrendStructure, calculateTradeSetup } from './technicalIndicators';\n\n/**\n * Main analysis function - combines all scoring components\n * \n * @param {Object} stockData - Stock data from backend\n * @param {Object} spyData - SPY data from backend\n * @returns {Object} Complete analysis with scores and verdict\n */\nexport function analyzeStock(stockData, spyData) {\n  var _stockData$priceHisto, _stockData$priceHisto2, _stockData$priceHisto3, _stockData$priceHisto4, _technicalAnalysis$sc, _technicalAnalysis$sc2, _technicalAnalysis$sc3, _technicalAnalysis$qu;\n  const analysis = {\n    ticker: stockData.ticker,\n    currentPrice: stockData.currentPrice,\n    timestamp: new Date().toISOString(),\n    scores: {},\n    qualityGates: [],\n    criticalFails: [],\n    verdict: null,\n    tradeSetup: null\n  };\n\n  // ========================================\n  // 1. RELATIVE STRENGTH (10 points)\n  // ========================================\n  const rsAnalysis = calculateRelativeStrength(stockData, spyData);\n  analysis.relativeStrength = rsAnalysis;\n  analysis.scores.rs = rsAnalysis.score || 0;\n\n  // RS Quality Gate\n  const rsGate = checkRSQualityGate(rsAnalysis.rs52Week);\n  analysis.qualityGates.push({\n    name: 'Relative Strength',\n    passes: rsGate.passes,\n    reason: rsGate.reason,\n    severity: rsGate.severity\n  });\n  if (rsGate.severity === 'critical') {\n    analysis.criticalFails.push('RS below 0.8 - significant market underperformer');\n  }\n\n  // ========================================\n  // 2. TECHNICAL ANALYSIS (30 points + 10 RS = 40 total)\n  // ========================================\n  const priceData = {\n    closes: ((_stockData$priceHisto = stockData.priceHistory) === null || _stockData$priceHisto === void 0 ? void 0 : _stockData$priceHisto.closes) || [],\n    highs: ((_stockData$priceHisto2 = stockData.priceHistory) === null || _stockData$priceHisto2 === void 0 ? void 0 : _stockData$priceHisto2.highs) || [],\n    lows: ((_stockData$priceHisto3 = stockData.priceHistory) === null || _stockData$priceHisto3 === void 0 ? void 0 : _stockData$priceHisto3.lows) || [],\n    volumes: ((_stockData$priceHisto4 = stockData.priceHistory) === null || _stockData$priceHisto4 === void 0 ? void 0 : _stockData$priceHisto4.volumes) || []\n  };\n  const technicalAnalysis = analyzeTrendStructure(priceData);\n  analysis.technical = technicalAnalysis;\n\n  // Individual technical scores\n  analysis.scores.trendStructure = ((_technicalAnalysis$sc = technicalAnalysis.scores) === null || _technicalAnalysis$sc === void 0 ? void 0 : _technicalAnalysis$sc.trendStructure) || 0;\n  analysis.scores.shortTermTrend = ((_technicalAnalysis$sc2 = technicalAnalysis.scores) === null || _technicalAnalysis$sc2 === void 0 ? void 0 : _technicalAnalysis$sc2.shortTermTrend) || 0;\n  analysis.scores.volume = ((_technicalAnalysis$sc3 = technicalAnalysis.scores) === null || _technicalAnalysis$sc3 === void 0 ? void 0 : _technicalAnalysis$sc3.volume) || 0;\n\n  // Debug logging\n  console.log('Technical Score Breakdown:', {\n    trendStructure: analysis.scores.trendStructure,\n    shortTermTrend: analysis.scores.shortTermTrend,\n    volume: analysis.scores.volume,\n    rs: analysis.scores.rs,\n    technicalAnalysisScores: technicalAnalysis.scores,\n    technicalAnalysisError: technicalAnalysis.error\n  });\n\n  // Technical total (including RS)\n  analysis.scores.technicalTotal = analysis.scores.trendStructure + analysis.scores.shortTermTrend + analysis.scores.volume + analysis.scores.rs;\n\n  // 200 SMA Quality Gate\n  if (!((_technicalAnalysis$qu = technicalAnalysis.qualityGate) !== null && _technicalAnalysis$qu !== void 0 && _technicalAnalysis$qu.passes)) {\n    analysis.criticalFails.push('Below 200 SMA - not in uptrend');\n    analysis.qualityGates.push({\n      name: '200 SMA Trend',\n      passes: false,\n      reason: 'Stock is below 200 SMA - not in Stage 2 uptrend',\n      severity: 'critical'\n    });\n  } else {\n    analysis.qualityGates.push({\n      name: '200 SMA Trend',\n      passes: true,\n      reason: 'Stock is above 200 SMA - in uptrend',\n      severity: 'none'\n    });\n  }\n\n  // ========================================\n  // 3. FUNDAMENTAL ANALYSIS (20 points)\n  // ========================================\n  const fundamentalAnalysis = analyzeFundamentals(stockData.fundamentals);\n  analysis.fundamental = fundamentalAnalysis;\n  analysis.scores.fundamentalTotal = fundamentalAnalysis.totalScore;\n\n  // ========================================\n  // 4. SENTIMENT (10 points) - Placeholder\n  // ========================================\n  // For v1.0, we'll use a neutral score\n  // Real sentiment will be added in v2.0\n  analysis.scores.sentiment = 5; // Neutral placeholder\n  analysis.sentiment = {\n    score: 5,\n    note: 'Sentiment analysis placeholder - will be enhanced in v2.0'\n  };\n\n  // ========================================\n  // 5. RISK/MACRO (5 points)\n  // ========================================\n  const riskAnalysis = analyzeRiskMacro(spyData);\n  analysis.risk = riskAnalysis;\n  analysis.scores.riskTotal = riskAnalysis.totalScore;\n\n  // VIX Quality Gate (if available)\n  if (riskAnalysis.vixLevel && riskAnalysis.vixLevel > 30) {\n    analysis.criticalFails.push('VIX > 30 - high volatility regime');\n    analysis.qualityGates.push({\n      name: 'VIX Level',\n      passes: false,\n      reason: 'VIX above 30 indicates high market fear',\n      severity: 'critical'\n    });\n  }\n\n  // ========================================\n  // 6. LIQUIDITY QUALITY GATE\n  // ========================================\n  const avgDollarVolume = stockData.avgVolume * stockData.currentPrice;\n  if (avgDollarVolume < 10000000) {\n    // $10M minimum\n    analysis.criticalFails.push('Average daily dollar volume < $10M - illiquid');\n    analysis.qualityGates.push({\n      name: 'Liquidity',\n      passes: false,\n      reason: `Average dollar volume $${(avgDollarVolume / 1000000).toFixed(1)}M is below $10M threshold`,\n      severity: 'critical'\n    });\n  } else {\n    analysis.qualityGates.push({\n      name: 'Liquidity',\n      passes: true,\n      reason: `Average dollar volume $${(avgDollarVolume / 1000000).toFixed(1)}M is adequate`,\n      severity: 'none'\n    });\n  }\n\n  // ========================================\n  // TOTAL SCORE (75 points max)\n  // ========================================\n  analysis.scores.total = analysis.scores.technicalTotal +\n  // 40 max\n  analysis.scores.fundamentalTotal +\n  // 20 max\n  analysis.scores.sentiment +\n  // 10 max\n  analysis.scores.riskTotal; // 5 max\n\n  analysis.scores.maxPossible = 75;\n  analysis.scores.percentage = Math.round(analysis.scores.total / 75 * 100);\n\n  // ========================================\n  // VERDICT DETERMINATION\n  // ========================================\n  analysis.verdict = determineVerdict(analysis);\n\n  // ========================================\n  // TRADE SETUP (if BUY verdict)\n  // ========================================\n  if (analysis.verdict.action === 'BUY') {\n    var _technicalAnalysis$me, _technicalAnalysis$me2;\n    const atr = (_technicalAnalysis$me = technicalAnalysis.metrics) === null || _technicalAnalysis$me === void 0 ? void 0 : (_technicalAnalysis$me2 = _technicalAnalysis$me.atr) === null || _technicalAnalysis$me2 === void 0 ? void 0 : _technicalAnalysis$me2.value;\n    analysis.tradeSetup = calculateTradeSetup(stockData.currentPrice, atr);\n  }\n  return analysis;\n}\n\n/**\n * Analyze fundamental metrics (20 points max)\n */\nfunction analyzeFundamentals(fundamentals) {\n  if (!fundamentals) {\n    return {\n      totalScore: 0,\n      error: 'No fundamental data available'\n    };\n  }\n  let totalScore = 0;\n  const breakdown = {};\n\n  // EPS Growth (6 points)\n  const epsGrowth = fundamentals.epsGrowth;\n  if (epsGrowth !== null && epsGrowth !== undefined) {\n    if (epsGrowth > 25) breakdown.epsGrowth = 6;else if (epsGrowth > 15) breakdown.epsGrowth = 4;else if (epsGrowth > 10) breakdown.epsGrowth = 2;else breakdown.epsGrowth = 0;\n    totalScore += breakdown.epsGrowth;\n  }\n\n  // Revenue Growth (5 points)\n  const revenueGrowth = fundamentals.revenueGrowth;\n  if (revenueGrowth !== null && revenueGrowth !== undefined) {\n    if (revenueGrowth > 20) breakdown.revenueGrowth = 5;else if (revenueGrowth > 10) breakdown.revenueGrowth = 3;else if (revenueGrowth > 5) breakdown.revenueGrowth = 1;else breakdown.revenueGrowth = 0;\n    totalScore += breakdown.revenueGrowth;\n  }\n\n  // ROE (4 points)\n  const roe = fundamentals.roe;\n  if (roe !== null && roe !== undefined) {\n    if (roe > 15) breakdown.roe = 4;else if (roe > 10) breakdown.roe = 2;else breakdown.roe = 0;\n    totalScore += breakdown.roe;\n  }\n\n  // Debt/Equity (3 points)\n  const debtEquity = fundamentals.debtToEquity;\n  if (debtEquity !== null && debtEquity !== undefined) {\n    if (debtEquity < 1.0) breakdown.debtEquity = 3;else if (debtEquity < 1.5) breakdown.debtEquity = 1;else breakdown.debtEquity = 0;\n    totalScore += breakdown.debtEquity;\n  }\n\n  // Forward P/E (2 points)\n  const forwardPE = fundamentals.forwardPE;\n  if (forwardPE !== null && forwardPE !== undefined && forwardPE > 0) {\n    if (forwardPE < 20) breakdown.forwardPE = 2;else if (forwardPE < 25) breakdown.forwardPE = 1;else breakdown.forwardPE = 0;\n    totalScore += breakdown.forwardPE;\n  }\n  return {\n    totalScore,\n    maxScore: 20,\n    breakdown,\n    rawData: fundamentals\n  };\n}\n\n/**\n * Analyze risk/macro factors (5 points max)\n */\nfunction analyzeRiskMacro(spyData) {\n  let totalScore = 0;\n  const breakdown = {};\n\n  // VIX Level (2 points) - placeholder for v1.0\n  // Will add real VIX data in v1.1\n  breakdown.vix = 1; // Assume moderate VIX\n  totalScore += 1;\n\n  // S&P 500 Regime (2 points)\n  // SPY above 200 SMA = bullish regime\n  if (spyData !== null && spyData !== void 0 && spyData.sma200 && spyData !== null && spyData !== void 0 && spyData.currentPrice) {\n    if (spyData.currentPrice > spyData.sma200) {\n      breakdown.spyRegime = 2;\n      totalScore += 2;\n    } else {\n      breakdown.spyRegime = 0;\n    }\n  } else {\n    breakdown.spyRegime = 1; // Neutral if no data\n    totalScore += 1;\n  }\n\n  // Market Breadth (1 point) - placeholder\n  breakdown.breadth = 1; // Assume neutral\n  totalScore += 1;\n  return {\n    totalScore,\n    maxScore: 5,\n    breakdown,\n    vixLevel: null,\n    // Will be real in v1.1\n    spyAbove200: (spyData === null || spyData === void 0 ? void 0 : spyData.currentPrice) > (spyData === null || spyData === void 0 ? void 0 : spyData.sma200)\n  };\n}\n\n/**\n * Determine final verdict based on score and quality gates\n */\nfunction determineVerdict(analysis) {\n  var _analysis$relativeStr;\n  const score = analysis.scores.total;\n  const criticalFails = analysis.criticalFails.length;\n  const rs = (_analysis$relativeStr = analysis.relativeStrength) === null || _analysis$relativeStr === void 0 ? void 0 : _analysis$relativeStr.rs52Week;\n\n  // AVOID conditions (checked first)\n  if (criticalFails >= 2) {\n    return {\n      action: 'AVOID',\n      confidence: 'high',\n      reason: `${criticalFails} critical quality gate failures`,\n      color: 'red'\n    };\n  }\n  if (rs !== null && rs < 0.8) {\n    return {\n      action: 'AVOID',\n      confidence: 'high',\n      reason: 'RS below 0.8 - significant market underperformer',\n      color: 'red'\n    };\n  }\n  if (score < 40) {\n    return {\n      action: 'AVOID',\n      confidence: 'medium',\n      reason: `Score ${score}/75 is below minimum threshold`,\n      color: 'red'\n    };\n  }\n\n  // HOLD conditions\n  if (criticalFails === 1) {\n    return {\n      action: 'HOLD',\n      confidence: 'medium',\n      reason: '1 critical quality gate failure - wait for improvement',\n      color: 'yellow'\n    };\n  }\n  if (score >= 40 && score < 60) {\n    return {\n      action: 'HOLD',\n      confidence: 'medium',\n      reason: `Score ${score}/75 is moderate - not a strong setup`,\n      color: 'yellow'\n    };\n  }\n  if (rs !== null && rs < 1.0) {\n    return {\n      action: 'HOLD',\n      confidence: 'medium',\n      reason: 'RS below 1.0 - underperforming market',\n      color: 'yellow'\n    };\n  }\n\n  // BUY conditions\n  if (score >= 60 && criticalFails === 0 && (rs === null || rs >= 1.0)) {\n    let confidence = 'medium';\n    if (score >= 65 && rs >= 1.2) confidence = 'high';\n    if (score >= 70 && rs >= 1.3) confidence = 'very high';\n    return {\n      action: 'BUY',\n      confidence,\n      reason: `Score ${score}/75 with strong RS of ${(rs === null || rs === void 0 ? void 0 : rs.toFixed(2)) || 'N/A'}`,\n      color: 'green'\n    };\n  }\n\n  // Default to HOLD\n  return {\n    action: 'HOLD',\n    confidence: 'low',\n    reason: 'Mixed signals - proceed with caution',\n    color: 'yellow'\n  };\n}\n\n/**\n * Format analysis for display\n */\nexport function formatAnalysisForDisplay(analysis) {\n  var _analysis$currentPric;\n  return {\n    ticker: analysis.ticker,\n    price: `$${(_analysis$currentPric = analysis.currentPrice) === null || _analysis$currentPric === void 0 ? void 0 : _analysis$currentPric.toFixed(2)}`,\n    verdict: analysis.verdict,\n    score: `${analysis.scores.total}/${analysis.scores.maxPossible}`,\n    scorePercentage: `${analysis.scores.percentage}%`,\n    breakdown: {\n      technical: `${analysis.scores.technicalTotal}/40`,\n      fundamental: `${analysis.scores.fundamentalTotal}/20`,\n      sentiment: `${analysis.scores.sentiment}/10`,\n      risk: `${analysis.scores.riskTotal}/5`\n    },\n    rs: analysis.relativeStrength,\n    qualityGates: analysis.qualityGates,\n    criticalFails: analysis.criticalFails,\n    tradeSetup: analysis.tradeSetup,\n    timestamp: analysis.timestamp\n  };\n}","map":{"version":3,"names":["calculateRelativeStrength","checkRSQualityGate","analyzeTrendStructure","calculateTradeSetup","analyzeStock","stockData","spyData","_stockData$priceHisto","_stockData$priceHisto2","_stockData$priceHisto3","_stockData$priceHisto4","_technicalAnalysis$sc","_technicalAnalysis$sc2","_technicalAnalysis$sc3","_technicalAnalysis$qu","analysis","ticker","currentPrice","timestamp","Date","toISOString","scores","qualityGates","criticalFails","verdict","tradeSetup","rsAnalysis","relativeStrength","rs","score","rsGate","rs52Week","push","name","passes","reason","severity","priceData","closes","priceHistory","highs","lows","volumes","technicalAnalysis","technical","trendStructure","shortTermTrend","volume","console","log","technicalAnalysisScores","technicalAnalysisError","error","technicalTotal","qualityGate","fundamentalAnalysis","analyzeFundamentals","fundamentals","fundamental","fundamentalTotal","totalScore","sentiment","note","riskAnalysis","analyzeRiskMacro","risk","riskTotal","vixLevel","avgDollarVolume","avgVolume","toFixed","total","maxPossible","percentage","Math","round","determineVerdict","action","_technicalAnalysis$me","_technicalAnalysis$me2","atr","metrics","value","breakdown","epsGrowth","undefined","revenueGrowth","roe","debtEquity","debtToEquity","forwardPE","maxScore","rawData","vix","sma200","spyRegime","breadth","spyAbove200","_analysis$relativeStr","length","confidence","color","formatAnalysisForDisplay","_analysis$currentPric","price","scorePercentage"],"sources":["/Users/balajik/projects/swing-trade-analyzer/frontend/src/utils/scoringEngine.js"],"sourcesContent":["/**\n * Scoring Engine - 75 Point System\n * \n * Based on proven swing trading methodologies:\n * - Mark Minervini's SEPA\n * - William O'Neil's CAN SLIM\n * \n * Scoring Breakdown:\n * - Technical Analysis: 40 points (Trend 15 + Short-term 10 + RS 10 + Volume 5)\n * - Fundamental Analysis: 20 points\n * - Sentiment: 10 points (placeholder for v1.0)\n * - Risk/Macro: 5 points\n * \n * Verdict Logic:\n * - BUY: Score ≥60/75 + No critical fails + RS >1.0\n * - HOLD: Score 40-59 OR 1 critical fail\n * - AVOID: Score <40 OR 2+ critical fails OR RS <0.8\n */\n\nimport { calculateRelativeStrength, checkRSQualityGate } from './rsCalculator';\nimport { analyzeTrendStructure, calculateTradeSetup } from './technicalIndicators';\n\n/**\n * Main analysis function - combines all scoring components\n * \n * @param {Object} stockData - Stock data from backend\n * @param {Object} spyData - SPY data from backend\n * @returns {Object} Complete analysis with scores and verdict\n */\nexport function analyzeStock(stockData, spyData) {\n  const analysis = {\n    ticker: stockData.ticker,\n    currentPrice: stockData.currentPrice,\n    timestamp: new Date().toISOString(),\n    scores: {},\n    qualityGates: [],\n    criticalFails: [],\n    verdict: null,\n    tradeSetup: null\n  };\n  \n  // ========================================\n  // 1. RELATIVE STRENGTH (10 points)\n  // ========================================\n  const rsAnalysis = calculateRelativeStrength(stockData, spyData);\n  analysis.relativeStrength = rsAnalysis;\n  analysis.scores.rs = rsAnalysis.score || 0;\n  \n  // RS Quality Gate\n  const rsGate = checkRSQualityGate(rsAnalysis.rs52Week);\n  analysis.qualityGates.push({\n    name: 'Relative Strength',\n    passes: rsGate.passes,\n    reason: rsGate.reason,\n    severity: rsGate.severity\n  });\n  \n  if (rsGate.severity === 'critical') {\n    analysis.criticalFails.push('RS below 0.8 - significant market underperformer');\n  }\n  \n  // ========================================\n  // 2. TECHNICAL ANALYSIS (30 points + 10 RS = 40 total)\n  // ========================================\n  const priceData = {\n    closes: stockData.priceHistory?.closes || [],\n    highs: stockData.priceHistory?.highs || [],\n    lows: stockData.priceHistory?.lows || [],\n    volumes: stockData.priceHistory?.volumes || []\n  };\n  \n  const technicalAnalysis = analyzeTrendStructure(priceData);\n  analysis.technical = technicalAnalysis;\n  \n  // Individual technical scores\n  analysis.scores.trendStructure = technicalAnalysis.scores?.trendStructure || 0;\n  analysis.scores.shortTermTrend = technicalAnalysis.scores?.shortTermTrend || 0;\n  analysis.scores.volume = technicalAnalysis.scores?.volume || 0;\n  \n  // Debug logging\n  console.log('Technical Score Breakdown:', {\n    trendStructure: analysis.scores.trendStructure,\n    shortTermTrend: analysis.scores.shortTermTrend,\n    volume: analysis.scores.volume,\n    rs: analysis.scores.rs,\n    technicalAnalysisScores: technicalAnalysis.scores,\n    technicalAnalysisError: technicalAnalysis.error\n  });\n  \n  // Technical total (including RS)\n  analysis.scores.technicalTotal = \n    analysis.scores.trendStructure + \n    analysis.scores.shortTermTrend + \n    analysis.scores.volume + \n    analysis.scores.rs;\n  \n  // 200 SMA Quality Gate\n  if (!technicalAnalysis.qualityGate?.passes) {\n    analysis.criticalFails.push('Below 200 SMA - not in uptrend');\n    analysis.qualityGates.push({\n      name: '200 SMA Trend',\n      passes: false,\n      reason: 'Stock is below 200 SMA - not in Stage 2 uptrend',\n      severity: 'critical'\n    });\n  } else {\n    analysis.qualityGates.push({\n      name: '200 SMA Trend',\n      passes: true,\n      reason: 'Stock is above 200 SMA - in uptrend',\n      severity: 'none'\n    });\n  }\n  \n  // ========================================\n  // 3. FUNDAMENTAL ANALYSIS (20 points)\n  // ========================================\n  const fundamentalAnalysis = analyzeFundamentals(stockData.fundamentals);\n  analysis.fundamental = fundamentalAnalysis;\n  analysis.scores.fundamentalTotal = fundamentalAnalysis.totalScore;\n  \n  // ========================================\n  // 4. SENTIMENT (10 points) - Placeholder\n  // ========================================\n  // For v1.0, we'll use a neutral score\n  // Real sentiment will be added in v2.0\n  analysis.scores.sentiment = 5; // Neutral placeholder\n  analysis.sentiment = {\n    score: 5,\n    note: 'Sentiment analysis placeholder - will be enhanced in v2.0'\n  };\n  \n  // ========================================\n  // 5. RISK/MACRO (5 points)\n  // ========================================\n  const riskAnalysis = analyzeRiskMacro(spyData);\n  analysis.risk = riskAnalysis;\n  analysis.scores.riskTotal = riskAnalysis.totalScore;\n  \n  // VIX Quality Gate (if available)\n  if (riskAnalysis.vixLevel && riskAnalysis.vixLevel > 30) {\n    analysis.criticalFails.push('VIX > 30 - high volatility regime');\n    analysis.qualityGates.push({\n      name: 'VIX Level',\n      passes: false,\n      reason: 'VIX above 30 indicates high market fear',\n      severity: 'critical'\n    });\n  }\n  \n  // ========================================\n  // 6. LIQUIDITY QUALITY GATE\n  // ========================================\n  const avgDollarVolume = stockData.avgVolume * stockData.currentPrice;\n  if (avgDollarVolume < 10000000) { // $10M minimum\n    analysis.criticalFails.push('Average daily dollar volume < $10M - illiquid');\n    analysis.qualityGates.push({\n      name: 'Liquidity',\n      passes: false,\n      reason: `Average dollar volume $${(avgDollarVolume/1000000).toFixed(1)}M is below $10M threshold`,\n      severity: 'critical'\n    });\n  } else {\n    analysis.qualityGates.push({\n      name: 'Liquidity',\n      passes: true,\n      reason: `Average dollar volume $${(avgDollarVolume/1000000).toFixed(1)}M is adequate`,\n      severity: 'none'\n    });\n  }\n  \n  // ========================================\n  // TOTAL SCORE (75 points max)\n  // ========================================\n  analysis.scores.total = \n    analysis.scores.technicalTotal +      // 40 max\n    analysis.scores.fundamentalTotal +    // 20 max\n    analysis.scores.sentiment +           // 10 max\n    analysis.scores.riskTotal;            // 5 max\n  \n  analysis.scores.maxPossible = 75;\n  analysis.scores.percentage = Math.round((analysis.scores.total / 75) * 100);\n  \n  // ========================================\n  // VERDICT DETERMINATION\n  // ========================================\n  analysis.verdict = determineVerdict(analysis);\n  \n  // ========================================\n  // TRADE SETUP (if BUY verdict)\n  // ========================================\n  if (analysis.verdict.action === 'BUY') {\n    const atr = technicalAnalysis.metrics?.atr?.value;\n    analysis.tradeSetup = calculateTradeSetup(stockData.currentPrice, atr);\n  }\n  \n  return analysis;\n}\n\n/**\n * Analyze fundamental metrics (20 points max)\n */\nfunction analyzeFundamentals(fundamentals) {\n  if (!fundamentals) {\n    return {\n      totalScore: 0,\n      error: 'No fundamental data available'\n    };\n  }\n  \n  let totalScore = 0;\n  const breakdown = {};\n  \n  // EPS Growth (6 points)\n  const epsGrowth = fundamentals.epsGrowth;\n  if (epsGrowth !== null && epsGrowth !== undefined) {\n    if (epsGrowth > 25) breakdown.epsGrowth = 6;\n    else if (epsGrowth > 15) breakdown.epsGrowth = 4;\n    else if (epsGrowth > 10) breakdown.epsGrowth = 2;\n    else breakdown.epsGrowth = 0;\n    totalScore += breakdown.epsGrowth;\n  }\n  \n  // Revenue Growth (5 points)\n  const revenueGrowth = fundamentals.revenueGrowth;\n  if (revenueGrowth !== null && revenueGrowth !== undefined) {\n    if (revenueGrowth > 20) breakdown.revenueGrowth = 5;\n    else if (revenueGrowth > 10) breakdown.revenueGrowth = 3;\n    else if (revenueGrowth > 5) breakdown.revenueGrowth = 1;\n    else breakdown.revenueGrowth = 0;\n    totalScore += breakdown.revenueGrowth;\n  }\n  \n  // ROE (4 points)\n  const roe = fundamentals.roe;\n  if (roe !== null && roe !== undefined) {\n    if (roe > 15) breakdown.roe = 4;\n    else if (roe > 10) breakdown.roe = 2;\n    else breakdown.roe = 0;\n    totalScore += breakdown.roe;\n  }\n  \n  // Debt/Equity (3 points)\n  const debtEquity = fundamentals.debtToEquity;\n  if (debtEquity !== null && debtEquity !== undefined) {\n    if (debtEquity < 1.0) breakdown.debtEquity = 3;\n    else if (debtEquity < 1.5) breakdown.debtEquity = 1;\n    else breakdown.debtEquity = 0;\n    totalScore += breakdown.debtEquity;\n  }\n  \n  // Forward P/E (2 points)\n  const forwardPE = fundamentals.forwardPE;\n  if (forwardPE !== null && forwardPE !== undefined && forwardPE > 0) {\n    if (forwardPE < 20) breakdown.forwardPE = 2;\n    else if (forwardPE < 25) breakdown.forwardPE = 1;\n    else breakdown.forwardPE = 0;\n    totalScore += breakdown.forwardPE;\n  }\n  \n  return {\n    totalScore,\n    maxScore: 20,\n    breakdown,\n    rawData: fundamentals\n  };\n}\n\n/**\n * Analyze risk/macro factors (5 points max)\n */\nfunction analyzeRiskMacro(spyData) {\n  let totalScore = 0;\n  const breakdown = {};\n  \n  // VIX Level (2 points) - placeholder for v1.0\n  // Will add real VIX data in v1.1\n  breakdown.vix = 1; // Assume moderate VIX\n  totalScore += 1;\n  \n  // S&P 500 Regime (2 points)\n  // SPY above 200 SMA = bullish regime\n  if (spyData?.sma200 && spyData?.currentPrice) {\n    if (spyData.currentPrice > spyData.sma200) {\n      breakdown.spyRegime = 2;\n      totalScore += 2;\n    } else {\n      breakdown.spyRegime = 0;\n    }\n  } else {\n    breakdown.spyRegime = 1; // Neutral if no data\n    totalScore += 1;\n  }\n  \n  // Market Breadth (1 point) - placeholder\n  breakdown.breadth = 1; // Assume neutral\n  totalScore += 1;\n  \n  return {\n    totalScore,\n    maxScore: 5,\n    breakdown,\n    vixLevel: null, // Will be real in v1.1\n    spyAbove200: spyData?.currentPrice > spyData?.sma200\n  };\n}\n\n/**\n * Determine final verdict based on score and quality gates\n */\nfunction determineVerdict(analysis) {\n  const score = analysis.scores.total;\n  const criticalFails = analysis.criticalFails.length;\n  const rs = analysis.relativeStrength?.rs52Week;\n  \n  // AVOID conditions (checked first)\n  if (criticalFails >= 2) {\n    return {\n      action: 'AVOID',\n      confidence: 'high',\n      reason: `${criticalFails} critical quality gate failures`,\n      color: 'red'\n    };\n  }\n  \n  if (rs !== null && rs < 0.8) {\n    return {\n      action: 'AVOID',\n      confidence: 'high',\n      reason: 'RS below 0.8 - significant market underperformer',\n      color: 'red'\n    };\n  }\n  \n  if (score < 40) {\n    return {\n      action: 'AVOID',\n      confidence: 'medium',\n      reason: `Score ${score}/75 is below minimum threshold`,\n      color: 'red'\n    };\n  }\n  \n  // HOLD conditions\n  if (criticalFails === 1) {\n    return {\n      action: 'HOLD',\n      confidence: 'medium',\n      reason: '1 critical quality gate failure - wait for improvement',\n      color: 'yellow'\n    };\n  }\n  \n  if (score >= 40 && score < 60) {\n    return {\n      action: 'HOLD',\n      confidence: 'medium',\n      reason: `Score ${score}/75 is moderate - not a strong setup`,\n      color: 'yellow'\n    };\n  }\n  \n  if (rs !== null && rs < 1.0) {\n    return {\n      action: 'HOLD',\n      confidence: 'medium',\n      reason: 'RS below 1.0 - underperforming market',\n      color: 'yellow'\n    };\n  }\n  \n  // BUY conditions\n  if (score >= 60 && criticalFails === 0 && (rs === null || rs >= 1.0)) {\n    let confidence = 'medium';\n    if (score >= 65 && rs >= 1.2) confidence = 'high';\n    if (score >= 70 && rs >= 1.3) confidence = 'very high';\n    \n    return {\n      action: 'BUY',\n      confidence,\n      reason: `Score ${score}/75 with strong RS of ${rs?.toFixed(2) || 'N/A'}`,\n      color: 'green'\n    };\n  }\n  \n  // Default to HOLD\n  return {\n    action: 'HOLD',\n    confidence: 'low',\n    reason: 'Mixed signals - proceed with caution',\n    color: 'yellow'\n  };\n}\n\n/**\n * Format analysis for display\n */\nexport function formatAnalysisForDisplay(analysis) {\n  return {\n    ticker: analysis.ticker,\n    price: `$${analysis.currentPrice?.toFixed(2)}`,\n    verdict: analysis.verdict,\n    score: `${analysis.scores.total}/${analysis.scores.maxPossible}`,\n    scorePercentage: `${analysis.scores.percentage}%`,\n    breakdown: {\n      technical: `${analysis.scores.technicalTotal}/40`,\n      fundamental: `${analysis.scores.fundamentalTotal}/20`,\n      sentiment: `${analysis.scores.sentiment}/10`,\n      risk: `${analysis.scores.riskTotal}/5`\n    },\n    rs: analysis.relativeStrength,\n    qualityGates: analysis.qualityGates,\n    criticalFails: analysis.criticalFails,\n    tradeSetup: analysis.tradeSetup,\n    timestamp: analysis.timestamp\n  };\n}"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASA,yBAAyB,EAAEC,kBAAkB,QAAQ,gBAAgB;AAC9E,SAASC,qBAAqB,EAAEC,mBAAmB,QAAQ,uBAAuB;;AAElF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,YAAYA,CAACC,SAAS,EAAEC,OAAO,EAAE;EAAA,IAAAC,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,qBAAA;EAC/C,MAAMC,QAAQ,GAAG;IACfC,MAAM,EAAEX,SAAS,CAACW,MAAM;IACxBC,YAAY,EAAEZ,SAAS,CAACY,YAAY;IACpCC,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;IACnCC,MAAM,EAAE,CAAC,CAAC;IACVC,YAAY,EAAE,EAAE;IAChBC,aAAa,EAAE,EAAE;IACjBC,OAAO,EAAE,IAAI;IACbC,UAAU,EAAE;EACd,CAAC;;EAED;EACA;EACA;EACA,MAAMC,UAAU,GAAG1B,yBAAyB,CAACK,SAAS,EAAEC,OAAO,CAAC;EAChES,QAAQ,CAACY,gBAAgB,GAAGD,UAAU;EACtCX,QAAQ,CAACM,MAAM,CAACO,EAAE,GAAGF,UAAU,CAACG,KAAK,IAAI,CAAC;;EAE1C;EACA,MAAMC,MAAM,GAAG7B,kBAAkB,CAACyB,UAAU,CAACK,QAAQ,CAAC;EACtDhB,QAAQ,CAACO,YAAY,CAACU,IAAI,CAAC;IACzBC,IAAI,EAAE,mBAAmB;IACzBC,MAAM,EAAEJ,MAAM,CAACI,MAAM;IACrBC,MAAM,EAAEL,MAAM,CAACK,MAAM;IACrBC,QAAQ,EAAEN,MAAM,CAACM;EACnB,CAAC,CAAC;EAEF,IAAIN,MAAM,CAACM,QAAQ,KAAK,UAAU,EAAE;IAClCrB,QAAQ,CAACQ,aAAa,CAACS,IAAI,CAAC,kDAAkD,CAAC;EACjF;;EAEA;EACA;EACA;EACA,MAAMK,SAAS,GAAG;IAChBC,MAAM,EAAE,EAAA/B,qBAAA,GAAAF,SAAS,CAACkC,YAAY,cAAAhC,qBAAA,uBAAtBA,qBAAA,CAAwB+B,MAAM,KAAI,EAAE;IAC5CE,KAAK,EAAE,EAAAhC,sBAAA,GAAAH,SAAS,CAACkC,YAAY,cAAA/B,sBAAA,uBAAtBA,sBAAA,CAAwBgC,KAAK,KAAI,EAAE;IAC1CC,IAAI,EAAE,EAAAhC,sBAAA,GAAAJ,SAAS,CAACkC,YAAY,cAAA9B,sBAAA,uBAAtBA,sBAAA,CAAwBgC,IAAI,KAAI,EAAE;IACxCC,OAAO,EAAE,EAAAhC,sBAAA,GAAAL,SAAS,CAACkC,YAAY,cAAA7B,sBAAA,uBAAtBA,sBAAA,CAAwBgC,OAAO,KAAI;EAC9C,CAAC;EAED,MAAMC,iBAAiB,GAAGzC,qBAAqB,CAACmC,SAAS,CAAC;EAC1DtB,QAAQ,CAAC6B,SAAS,GAAGD,iBAAiB;;EAEtC;EACA5B,QAAQ,CAACM,MAAM,CAACwB,cAAc,GAAG,EAAAlC,qBAAA,GAAAgC,iBAAiB,CAACtB,MAAM,cAAAV,qBAAA,uBAAxBA,qBAAA,CAA0BkC,cAAc,KAAI,CAAC;EAC9E9B,QAAQ,CAACM,MAAM,CAACyB,cAAc,GAAG,EAAAlC,sBAAA,GAAA+B,iBAAiB,CAACtB,MAAM,cAAAT,sBAAA,uBAAxBA,sBAAA,CAA0BkC,cAAc,KAAI,CAAC;EAC9E/B,QAAQ,CAACM,MAAM,CAAC0B,MAAM,GAAG,EAAAlC,sBAAA,GAAA8B,iBAAiB,CAACtB,MAAM,cAAAR,sBAAA,uBAAxBA,sBAAA,CAA0BkC,MAAM,KAAI,CAAC;;EAE9D;EACAC,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAE;IACxCJ,cAAc,EAAE9B,QAAQ,CAACM,MAAM,CAACwB,cAAc;IAC9CC,cAAc,EAAE/B,QAAQ,CAACM,MAAM,CAACyB,cAAc;IAC9CC,MAAM,EAAEhC,QAAQ,CAACM,MAAM,CAAC0B,MAAM;IAC9BnB,EAAE,EAAEb,QAAQ,CAACM,MAAM,CAACO,EAAE;IACtBsB,uBAAuB,EAAEP,iBAAiB,CAACtB,MAAM;IACjD8B,sBAAsB,EAAER,iBAAiB,CAACS;EAC5C,CAAC,CAAC;;EAEF;EACArC,QAAQ,CAACM,MAAM,CAACgC,cAAc,GAC5BtC,QAAQ,CAACM,MAAM,CAACwB,cAAc,GAC9B9B,QAAQ,CAACM,MAAM,CAACyB,cAAc,GAC9B/B,QAAQ,CAACM,MAAM,CAAC0B,MAAM,GACtBhC,QAAQ,CAACM,MAAM,CAACO,EAAE;;EAEpB;EACA,IAAI,GAAAd,qBAAA,GAAC6B,iBAAiB,CAACW,WAAW,cAAAxC,qBAAA,eAA7BA,qBAAA,CAA+BoB,MAAM,GAAE;IAC1CnB,QAAQ,CAACQ,aAAa,CAACS,IAAI,CAAC,gCAAgC,CAAC;IAC7DjB,QAAQ,CAACO,YAAY,CAACU,IAAI,CAAC;MACzBC,IAAI,EAAE,eAAe;MACrBC,MAAM,EAAE,KAAK;MACbC,MAAM,EAAE,iDAAiD;MACzDC,QAAQ,EAAE;IACZ,CAAC,CAAC;EACJ,CAAC,MAAM;IACLrB,QAAQ,CAACO,YAAY,CAACU,IAAI,CAAC;MACzBC,IAAI,EAAE,eAAe;MACrBC,MAAM,EAAE,IAAI;MACZC,MAAM,EAAE,qCAAqC;MAC7CC,QAAQ,EAAE;IACZ,CAAC,CAAC;EACJ;;EAEA;EACA;EACA;EACA,MAAMmB,mBAAmB,GAAGC,mBAAmB,CAACnD,SAAS,CAACoD,YAAY,CAAC;EACvE1C,QAAQ,CAAC2C,WAAW,GAAGH,mBAAmB;EAC1CxC,QAAQ,CAACM,MAAM,CAACsC,gBAAgB,GAAGJ,mBAAmB,CAACK,UAAU;;EAEjE;EACA;EACA;EACA;EACA;EACA7C,QAAQ,CAACM,MAAM,CAACwC,SAAS,GAAG,CAAC,CAAC,CAAC;EAC/B9C,QAAQ,CAAC8C,SAAS,GAAG;IACnBhC,KAAK,EAAE,CAAC;IACRiC,IAAI,EAAE;EACR,CAAC;;EAED;EACA;EACA;EACA,MAAMC,YAAY,GAAGC,gBAAgB,CAAC1D,OAAO,CAAC;EAC9CS,QAAQ,CAACkD,IAAI,GAAGF,YAAY;EAC5BhD,QAAQ,CAACM,MAAM,CAAC6C,SAAS,GAAGH,YAAY,CAACH,UAAU;;EAEnD;EACA,IAAIG,YAAY,CAACI,QAAQ,IAAIJ,YAAY,CAACI,QAAQ,GAAG,EAAE,EAAE;IACvDpD,QAAQ,CAACQ,aAAa,CAACS,IAAI,CAAC,mCAAmC,CAAC;IAChEjB,QAAQ,CAACO,YAAY,CAACU,IAAI,CAAC;MACzBC,IAAI,EAAE,WAAW;MACjBC,MAAM,EAAE,KAAK;MACbC,MAAM,EAAE,yCAAyC;MACjDC,QAAQ,EAAE;IACZ,CAAC,CAAC;EACJ;;EAEA;EACA;EACA;EACA,MAAMgC,eAAe,GAAG/D,SAAS,CAACgE,SAAS,GAAGhE,SAAS,CAACY,YAAY;EACpE,IAAImD,eAAe,GAAG,QAAQ,EAAE;IAAE;IAChCrD,QAAQ,CAACQ,aAAa,CAACS,IAAI,CAAC,+CAA+C,CAAC;IAC5EjB,QAAQ,CAACO,YAAY,CAACU,IAAI,CAAC;MACzBC,IAAI,EAAE,WAAW;MACjBC,MAAM,EAAE,KAAK;MACbC,MAAM,EAAE,0BAA0B,CAACiC,eAAe,GAAC,OAAO,EAAEE,OAAO,CAAC,CAAC,CAAC,2BAA2B;MACjGlC,QAAQ,EAAE;IACZ,CAAC,CAAC;EACJ,CAAC,MAAM;IACLrB,QAAQ,CAACO,YAAY,CAACU,IAAI,CAAC;MACzBC,IAAI,EAAE,WAAW;MACjBC,MAAM,EAAE,IAAI;MACZC,MAAM,EAAE,0BAA0B,CAACiC,eAAe,GAAC,OAAO,EAAEE,OAAO,CAAC,CAAC,CAAC,eAAe;MACrFlC,QAAQ,EAAE;IACZ,CAAC,CAAC;EACJ;;EAEA;EACA;EACA;EACArB,QAAQ,CAACM,MAAM,CAACkD,KAAK,GACnBxD,QAAQ,CAACM,MAAM,CAACgC,cAAc;EAAQ;EACtCtC,QAAQ,CAACM,MAAM,CAACsC,gBAAgB;EAAM;EACtC5C,QAAQ,CAACM,MAAM,CAACwC,SAAS;EAAa;EACtC9C,QAAQ,CAACM,MAAM,CAAC6C,SAAS,CAAC,CAAY;;EAExCnD,QAAQ,CAACM,MAAM,CAACmD,WAAW,GAAG,EAAE;EAChCzD,QAAQ,CAACM,MAAM,CAACoD,UAAU,GAAGC,IAAI,CAACC,KAAK,CAAE5D,QAAQ,CAACM,MAAM,CAACkD,KAAK,GAAG,EAAE,GAAI,GAAG,CAAC;;EAE3E;EACA;EACA;EACAxD,QAAQ,CAACS,OAAO,GAAGoD,gBAAgB,CAAC7D,QAAQ,CAAC;;EAE7C;EACA;EACA;EACA,IAAIA,QAAQ,CAACS,OAAO,CAACqD,MAAM,KAAK,KAAK,EAAE;IAAA,IAAAC,qBAAA,EAAAC,sBAAA;IACrC,MAAMC,GAAG,IAAAF,qBAAA,GAAGnC,iBAAiB,CAACsC,OAAO,cAAAH,qBAAA,wBAAAC,sBAAA,GAAzBD,qBAAA,CAA2BE,GAAG,cAAAD,sBAAA,uBAA9BA,sBAAA,CAAgCG,KAAK;IACjDnE,QAAQ,CAACU,UAAU,GAAGtB,mBAAmB,CAACE,SAAS,CAACY,YAAY,EAAE+D,GAAG,CAAC;EACxE;EAEA,OAAOjE,QAAQ;AACjB;;AAEA;AACA;AACA;AACA,SAASyC,mBAAmBA,CAACC,YAAY,EAAE;EACzC,IAAI,CAACA,YAAY,EAAE;IACjB,OAAO;MACLG,UAAU,EAAE,CAAC;MACbR,KAAK,EAAE;IACT,CAAC;EACH;EAEA,IAAIQ,UAAU,GAAG,CAAC;EAClB,MAAMuB,SAAS,GAAG,CAAC,CAAC;;EAEpB;EACA,MAAMC,SAAS,GAAG3B,YAAY,CAAC2B,SAAS;EACxC,IAAIA,SAAS,KAAK,IAAI,IAAIA,SAAS,KAAKC,SAAS,EAAE;IACjD,IAAID,SAAS,GAAG,EAAE,EAAED,SAAS,CAACC,SAAS,GAAG,CAAC,CAAC,KACvC,IAAIA,SAAS,GAAG,EAAE,EAAED,SAAS,CAACC,SAAS,GAAG,CAAC,CAAC,KAC5C,IAAIA,SAAS,GAAG,EAAE,EAAED,SAAS,CAACC,SAAS,GAAG,CAAC,CAAC,KAC5CD,SAAS,CAACC,SAAS,GAAG,CAAC;IAC5BxB,UAAU,IAAIuB,SAAS,CAACC,SAAS;EACnC;;EAEA;EACA,MAAME,aAAa,GAAG7B,YAAY,CAAC6B,aAAa;EAChD,IAAIA,aAAa,KAAK,IAAI,IAAIA,aAAa,KAAKD,SAAS,EAAE;IACzD,IAAIC,aAAa,GAAG,EAAE,EAAEH,SAAS,CAACG,aAAa,GAAG,CAAC,CAAC,KAC/C,IAAIA,aAAa,GAAG,EAAE,EAAEH,SAAS,CAACG,aAAa,GAAG,CAAC,CAAC,KACpD,IAAIA,aAAa,GAAG,CAAC,EAAEH,SAAS,CAACG,aAAa,GAAG,CAAC,CAAC,KACnDH,SAAS,CAACG,aAAa,GAAG,CAAC;IAChC1B,UAAU,IAAIuB,SAAS,CAACG,aAAa;EACvC;;EAEA;EACA,MAAMC,GAAG,GAAG9B,YAAY,CAAC8B,GAAG;EAC5B,IAAIA,GAAG,KAAK,IAAI,IAAIA,GAAG,KAAKF,SAAS,EAAE;IACrC,IAAIE,GAAG,GAAG,EAAE,EAAEJ,SAAS,CAACI,GAAG,GAAG,CAAC,CAAC,KAC3B,IAAIA,GAAG,GAAG,EAAE,EAAEJ,SAAS,CAACI,GAAG,GAAG,CAAC,CAAC,KAChCJ,SAAS,CAACI,GAAG,GAAG,CAAC;IACtB3B,UAAU,IAAIuB,SAAS,CAACI,GAAG;EAC7B;;EAEA;EACA,MAAMC,UAAU,GAAG/B,YAAY,CAACgC,YAAY;EAC5C,IAAID,UAAU,KAAK,IAAI,IAAIA,UAAU,KAAKH,SAAS,EAAE;IACnD,IAAIG,UAAU,GAAG,GAAG,EAAEL,SAAS,CAACK,UAAU,GAAG,CAAC,CAAC,KAC1C,IAAIA,UAAU,GAAG,GAAG,EAAEL,SAAS,CAACK,UAAU,GAAG,CAAC,CAAC,KAC/CL,SAAS,CAACK,UAAU,GAAG,CAAC;IAC7B5B,UAAU,IAAIuB,SAAS,CAACK,UAAU;EACpC;;EAEA;EACA,MAAME,SAAS,GAAGjC,YAAY,CAACiC,SAAS;EACxC,IAAIA,SAAS,KAAK,IAAI,IAAIA,SAAS,KAAKL,SAAS,IAAIK,SAAS,GAAG,CAAC,EAAE;IAClE,IAAIA,SAAS,GAAG,EAAE,EAAEP,SAAS,CAACO,SAAS,GAAG,CAAC,CAAC,KACvC,IAAIA,SAAS,GAAG,EAAE,EAAEP,SAAS,CAACO,SAAS,GAAG,CAAC,CAAC,KAC5CP,SAAS,CAACO,SAAS,GAAG,CAAC;IAC5B9B,UAAU,IAAIuB,SAAS,CAACO,SAAS;EACnC;EAEA,OAAO;IACL9B,UAAU;IACV+B,QAAQ,EAAE,EAAE;IACZR,SAAS;IACTS,OAAO,EAAEnC;EACX,CAAC;AACH;;AAEA;AACA;AACA;AACA,SAASO,gBAAgBA,CAAC1D,OAAO,EAAE;EACjC,IAAIsD,UAAU,GAAG,CAAC;EAClB,MAAMuB,SAAS,GAAG,CAAC,CAAC;;EAEpB;EACA;EACAA,SAAS,CAACU,GAAG,GAAG,CAAC,CAAC,CAAC;EACnBjC,UAAU,IAAI,CAAC;;EAEf;EACA;EACA,IAAItD,OAAO,aAAPA,OAAO,eAAPA,OAAO,CAAEwF,MAAM,IAAIxF,OAAO,aAAPA,OAAO,eAAPA,OAAO,CAAEW,YAAY,EAAE;IAC5C,IAAIX,OAAO,CAACW,YAAY,GAAGX,OAAO,CAACwF,MAAM,EAAE;MACzCX,SAAS,CAACY,SAAS,GAAG,CAAC;MACvBnC,UAAU,IAAI,CAAC;IACjB,CAAC,MAAM;MACLuB,SAAS,CAACY,SAAS,GAAG,CAAC;IACzB;EACF,CAAC,MAAM;IACLZ,SAAS,CAACY,SAAS,GAAG,CAAC,CAAC,CAAC;IACzBnC,UAAU,IAAI,CAAC;EACjB;;EAEA;EACAuB,SAAS,CAACa,OAAO,GAAG,CAAC,CAAC,CAAC;EACvBpC,UAAU,IAAI,CAAC;EAEf,OAAO;IACLA,UAAU;IACV+B,QAAQ,EAAE,CAAC;IACXR,SAAS;IACThB,QAAQ,EAAE,IAAI;IAAE;IAChB8B,WAAW,EAAE,CAAA3F,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEW,YAAY,KAAGX,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEwF,MAAM;EACtD,CAAC;AACH;;AAEA;AACA;AACA;AACA,SAASlB,gBAAgBA,CAAC7D,QAAQ,EAAE;EAAA,IAAAmF,qBAAA;EAClC,MAAMrE,KAAK,GAAGd,QAAQ,CAACM,MAAM,CAACkD,KAAK;EACnC,MAAMhD,aAAa,GAAGR,QAAQ,CAACQ,aAAa,CAAC4E,MAAM;EACnD,MAAMvE,EAAE,IAAAsE,qBAAA,GAAGnF,QAAQ,CAACY,gBAAgB,cAAAuE,qBAAA,uBAAzBA,qBAAA,CAA2BnE,QAAQ;;EAE9C;EACA,IAAIR,aAAa,IAAI,CAAC,EAAE;IACtB,OAAO;MACLsD,MAAM,EAAE,OAAO;MACfuB,UAAU,EAAE,MAAM;MAClBjE,MAAM,EAAE,GAAGZ,aAAa,iCAAiC;MACzD8E,KAAK,EAAE;IACT,CAAC;EACH;EAEA,IAAIzE,EAAE,KAAK,IAAI,IAAIA,EAAE,GAAG,GAAG,EAAE;IAC3B,OAAO;MACLiD,MAAM,EAAE,OAAO;MACfuB,UAAU,EAAE,MAAM;MAClBjE,MAAM,EAAE,kDAAkD;MAC1DkE,KAAK,EAAE;IACT,CAAC;EACH;EAEA,IAAIxE,KAAK,GAAG,EAAE,EAAE;IACd,OAAO;MACLgD,MAAM,EAAE,OAAO;MACfuB,UAAU,EAAE,QAAQ;MACpBjE,MAAM,EAAE,SAASN,KAAK,gCAAgC;MACtDwE,KAAK,EAAE;IACT,CAAC;EACH;;EAEA;EACA,IAAI9E,aAAa,KAAK,CAAC,EAAE;IACvB,OAAO;MACLsD,MAAM,EAAE,MAAM;MACduB,UAAU,EAAE,QAAQ;MACpBjE,MAAM,EAAE,wDAAwD;MAChEkE,KAAK,EAAE;IACT,CAAC;EACH;EAEA,IAAIxE,KAAK,IAAI,EAAE,IAAIA,KAAK,GAAG,EAAE,EAAE;IAC7B,OAAO;MACLgD,MAAM,EAAE,MAAM;MACduB,UAAU,EAAE,QAAQ;MACpBjE,MAAM,EAAE,SAASN,KAAK,sCAAsC;MAC5DwE,KAAK,EAAE;IACT,CAAC;EACH;EAEA,IAAIzE,EAAE,KAAK,IAAI,IAAIA,EAAE,GAAG,GAAG,EAAE;IAC3B,OAAO;MACLiD,MAAM,EAAE,MAAM;MACduB,UAAU,EAAE,QAAQ;MACpBjE,MAAM,EAAE,uCAAuC;MAC/CkE,KAAK,EAAE;IACT,CAAC;EACH;;EAEA;EACA,IAAIxE,KAAK,IAAI,EAAE,IAAIN,aAAa,KAAK,CAAC,KAAKK,EAAE,KAAK,IAAI,IAAIA,EAAE,IAAI,GAAG,CAAC,EAAE;IACpE,IAAIwE,UAAU,GAAG,QAAQ;IACzB,IAAIvE,KAAK,IAAI,EAAE,IAAID,EAAE,IAAI,GAAG,EAAEwE,UAAU,GAAG,MAAM;IACjD,IAAIvE,KAAK,IAAI,EAAE,IAAID,EAAE,IAAI,GAAG,EAAEwE,UAAU,GAAG,WAAW;IAEtD,OAAO;MACLvB,MAAM,EAAE,KAAK;MACbuB,UAAU;MACVjE,MAAM,EAAE,SAASN,KAAK,yBAAyB,CAAAD,EAAE,aAAFA,EAAE,uBAAFA,EAAE,CAAE0C,OAAO,CAAC,CAAC,CAAC,KAAI,KAAK,EAAE;MACxE+B,KAAK,EAAE;IACT,CAAC;EACH;;EAEA;EACA,OAAO;IACLxB,MAAM,EAAE,MAAM;IACduB,UAAU,EAAE,KAAK;IACjBjE,MAAM,EAAE,sCAAsC;IAC9CkE,KAAK,EAAE;EACT,CAAC;AACH;;AAEA;AACA;AACA;AACA,OAAO,SAASC,wBAAwBA,CAACvF,QAAQ,EAAE;EAAA,IAAAwF,qBAAA;EACjD,OAAO;IACLvF,MAAM,EAAED,QAAQ,CAACC,MAAM;IACvBwF,KAAK,EAAE,KAAAD,qBAAA,GAAIxF,QAAQ,CAACE,YAAY,cAAAsF,qBAAA,uBAArBA,qBAAA,CAAuBjC,OAAO,CAAC,CAAC,CAAC,EAAE;IAC9C9C,OAAO,EAAET,QAAQ,CAACS,OAAO;IACzBK,KAAK,EAAE,GAAGd,QAAQ,CAACM,MAAM,CAACkD,KAAK,IAAIxD,QAAQ,CAACM,MAAM,CAACmD,WAAW,EAAE;IAChEiC,eAAe,EAAE,GAAG1F,QAAQ,CAACM,MAAM,CAACoD,UAAU,GAAG;IACjDU,SAAS,EAAE;MACTvC,SAAS,EAAE,GAAG7B,QAAQ,CAACM,MAAM,CAACgC,cAAc,KAAK;MACjDK,WAAW,EAAE,GAAG3C,QAAQ,CAACM,MAAM,CAACsC,gBAAgB,KAAK;MACrDE,SAAS,EAAE,GAAG9C,QAAQ,CAACM,MAAM,CAACwC,SAAS,KAAK;MAC5CI,IAAI,EAAE,GAAGlD,QAAQ,CAACM,MAAM,CAAC6C,SAAS;IACpC,CAAC;IACDtC,EAAE,EAAEb,QAAQ,CAACY,gBAAgB;IAC7BL,YAAY,EAAEP,QAAQ,CAACO,YAAY;IACnCC,aAAa,EAAER,QAAQ,CAACQ,aAAa;IACrCE,UAAU,EAAEV,QAAQ,CAACU,UAAU;IAC/BP,SAAS,EAAEH,QAAQ,CAACG;EACtB,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}